# Node Coinfield API

This project is designed to help you make your own projects that interact with the Coinfield API. This project seeks to have complete API coverage including private calls and Websocket.

[![Coinfield](https://github.com/takoyaro/node-coinfield-api/raw/master/icons/coinfield.png)](https://coinfield.com/ref/0/IDD54356E7D6)

*I would like to point out that this is an unofficial script as Coinfield doesn't provide anything else than their REST and SocketIO API*

### ðŸ““ Documentation
In an attempt to keep this Readme short and sweet, you can find a few examples on how to use ***Node Coinfield API*** below but refer to your IDE Intellisense for the complete list of calls. If you use JS instead of TS, make sure to not call any private property or method (starting with an underscore '`_`') to avoid unwanted behavior. All the examples below are using the `await` syntax but most methods and properties return a Promise so you can go with `.then()` syntax if you prefer.

### ðŸ’» Installation

```sh
npm i node-coinfield-api --save
```

### ðŸ“œ Getting Started

Typescript
```ts
import {Coinfield} from 'node-coinfield-api';
const cf = newCoinfield(YOURAPIKEY:string,verbone:boolean)
```
Javascript
```ts
const Coinfield = require('node-coinfield-api').Coinfield;
const cf = new Coinfield(YOURAPIKEY:string,verbose:boolean);
```

### REST API 
##### Getting Server Status
```js
await cf.status();
```
<details>
 <summary>View Response</summary>
```ts
string: ok|maintenance|down
```
</details>

##### Get all available markets
```js
await cf.markets();
```
<details>
 <summary>View Response</summary>
```js
{ markets:
   [ { id: 'btcxrp',
       name: 'BTC/XRP',
       ask_precision: 8,
       bid_precision: 4,
       minimum_volume: '0.001',
       maximum_volume: '50.0',
       minimum_funds: '20.0',
       maximum_funds: '500000.0' },
     { id: 'ethxrp',
       name: 'ETH/XRP',
       ask_precision: 4,
       bid_precision: 4,
       minimum_volume: '0.1',
       maximum_volume: '300.0',
       minimum_funds: '20.0',
       maximum_funds: '500000.0' },
     { id: 'xlmxrp',
       name: 'XLM/XRP',
       ask_precision: 4,
       bid_precision: 4,
       minimum_volume: '200.0',
       maximum_volume: '600000.0',
       minimum_funds: '25.0',
       maximum_funds: '400000.0' },
     { id: 'ltcxrp',
       name: 'LTC/XRP',
       ask_precision: 2,
       bid_precision: 4,
       minimum_volume: '0.1',
       maximum_volume: '1000.0',
       minimum_funds: '20.0',
       maximum_funds: '500000.0' },
     { id: 'dashxrp',
       name: 'DASH/XRP',
       ask_precision: 3,
       bid_precision: 4,
       minimum_volume: '0.1',
       maximum_volume: '500.0',
       minimum_funds: '20.0',
       maximum_funds: '500000.0' },
     { id: 'bchxrp',
       name: 'BCH/XRP',
       ask_precision: 3,
       bid_precision: 4,
       minimum_volume: '0.05',
       maximum_volume: '400.0',
       minimum_funds: '20.0',
       maximum_funds: '500000.0' },
     { id: 'zecxrp',
       name: 'ZEC/XRP',
       ask_precision: 3,
       bid_precision: 4,
       minimum_volume: '0.1',
       maximum_volume: '500.0',
       minimum_funds: '20.0',
       maximum_funds: '500000.0' },
     { id: 'dashcad',
       name: 'DASH/CAD',
       ask_precision: 4,
       bid_precision: 2,
       minimum_volume: '0.1',
       maximum_volume: '500.0',
       minimum_funds: '20.0',
       maximum_funds: '500000.0' },
     { id: 'btgxrp',
       name: 'BTG/XRP',
       ask_precision: 2,
       bid_precision: 4,
       minimum_volume: '0.5',
       maximum_volume: '2000.0',
       minimum_funds: '20.0',
       maximum_funds: '500000.0' },
     { id: 'zrxxrp',
       name: 'ZRX/XRP',
       ask_precision: 1,
       bid_precision: 4,
       minimum_volume: '10.0',
       maximum_volume: '100000.0',
       minimum_funds: '20.0',
       maximum_funds: '500000.0' },
     { id: 'gntxrp',
       name: 'GNT/XRP',
       ask_precision: 1,
       bid_precision: 4,
       minimum_volume: '10.0',
       maximum_volume: '100000.0',
       minimum_funds: '20.0',
       maximum_funds: '500000.0' },
     { id: 'repxrp',
       name: 'REP/XRP',
       ask_precision: 3,
       bid_precision: 4,
       minimum_volume: '1.0',
       maximum_volume: '2000.0',
       minimum_funds: '20.0',
       maximum_funds: '500000.0' },
     { id: 'omgxrp',
       name: 'OMG/XRP',
       ask_precision: 2,
       bid_precision: 4,
       minimum_volume: '3.0',
       maximum_volume: '5000.0',
       minimum_funds: '20.0',
       maximum_funds: '500000.0' },
     { id: 'batxrp',
       name: 'BAT/XRP',
       ask_precision: 1,
       bid_precision: 4,
       minimum_volume: '50.0',
       maximum_volume: '200000.0',
       minimum_funds: '20.0',
       maximum_funds: '500000.0' },
     { id: 'zilxrp',
       name: 'ZIL/XRP',
       ask_precision: 1,
       bid_precision: 4,
       minimum_volume: '300.0',
       maximum_volume: '999999.0',
       minimum_funds: '20.0',
       maximum_funds: '500000.0' },
     { id: 'xrpcad',
       name: 'XRP/CAD',
       ask_precision: 4,
       bid_precision: 4,
       minimum_volume: '25.0',
       maximum_volume: '200000.0',
       minimum_funds: '20.0',
       maximum_funds: '300000.0' },
     { id: 'xrpusd',
       name: 'XRP/USD',
       ask_precision: 4,
       bid_precision: 4,
       minimum_volume: '40.0',
       maximum_volume: '200000.0',
       minimum_funds: '20.0',
       maximum_funds: '300000.0' },
     { id: 'btcusdc',
       name: 'BTC/USDC',
       ask_precision: 8,
       bid_precision: 2,
       minimum_volume: '0.002',
       maximum_volume: '50.0',
       minimum_funds: '20.0',
       maximum_funds: '300000.0' },
     { id: 'xrpusdc',
       name: 'XRP/USDC',
       ask_precision: 4,
       bid_precision: 4,
       minimum_volume: '20.0',
       maximum_volume: '200000.0',
       minimum_funds: '20.0',
       maximum_funds: '300000.0' },
     { id: 'xrpeur',
       name: 'XRP/EUR',
       ask_precision: 4,
       bid_precision: 4,
       minimum_volume: '20.0',
       maximum_volume: '200000.0',
       minimum_funds: '20.0',
       maximum_funds: '300000.0' },
     { id: 'xrpgbp',
       name: 'XRP/GBP',
       ask_precision: 4,
       bid_precision: 4,
       minimum_volume: '20.0',
       maximum_volume: '200000.0',
       minimum_funds: '20.0',
       maximum_funds: '300000.0' },
     { id: 'btcgbp',
       name: 'BTC/GBP',
       ask_precision: 8,
       bid_precision: 2,
       minimum_volume: '0.001',
       maximum_volume: '50.0',
       minimum_funds: '15.0',
       maximum_funds: '500000.0' },
     { id: 'ethgbp',
       name: 'ETH/GBP',
       ask_precision: 4,
       bid_precision: 2,
       minimum_volume: '0.1',
       maximum_volume: '300.0',
       minimum_funds: '15.0',
       maximum_funds: '500000.0' },
     { id: 'xlmgbp',
       name: 'XLM/GBP',
       ask_precision: 4,
       bid_precision: 4,
       minimum_volume: '100.0',
       maximum_volume: '600000.0',
       minimum_funds: '15.0',
       maximum_funds: '500000.0' },
     { id: 'ltcgbp',
       name: 'LTC/GBP',
       ask_precision: 4,
       bid_precision: 2,
       minimum_volume: '0.1',
       maximum_volume: '1000.0',
       minimum_funds: '15.0',
       maximum_funds: '500000.0' },
     { id: 'dgbgbp',
       name: 'DGB/GBP',
       ask_precision: 2,
       bid_precision: 6,
       minimum_volume: '300.0',
       maximum_volume: '999999.0',
       minimum_funds: '15.0',
       maximum_funds: '500000.0' },
     { id: 'xrpaed',
       name: 'XRP/AED',
       ask_precision: 4,
       bid_precision: 4,
       minimum_volume: '20.0',
       maximum_volume: '200000.0',
       minimum_funds: '50.0',
       maximum_funds: '999999.0' },
     { id: 'xrpjpy',
       name: 'XRP/JPY',
       ask_precision: 4,
       bid_precision: 2,
       minimum_volume: '20.0',
       maximum_volume: '2000000.0',
       minimum_funds: '1500.0',
       maximum_funds: '200000000.0' },
     { id: 'btceur',
       name: 'BTC/EUR',
       ask_precision: 8,
       bid_precision: 2,
       minimum_volume: '0.001',
       maximum_volume: '50.0',
       minimum_funds: '20.0',
       maximum_funds: '300000.0' },
     { id: 'etheur',
       name: 'ETH/EUR',
       ask_precision: 4,
       bid_precision: 2,
       minimum_volume: '0.1',
       maximum_volume: '300.0',
       minimum_funds: '20.0',
       maximum_funds: '300000.0' },
     { id: 'ltceur',
       name: 'LTC/EUR',
       ask_precision: 2,
       bid_precision: 2,
       minimum_volume: '0.1',
       maximum_volume: '1000.0',
       minimum_funds: '20.0',
       maximum_funds: '300000.0' },
     { id: 'xlmeur',
       name: 'XLM/EUR',
       ask_precision: 4,
       bid_precision: 4,
       minimum_volume: '100.0',
       maximum_volume: '200000.0',
       minimum_funds: '20.0',
       maximum_funds: '300000.0' },
     { id: 'dgbeur',
       name: 'DGB/EUR',
       ask_precision: 2,
       bid_precision: 6,
       minimum_volume: '300.0',
       maximum_volume: '9999999.0',
       minimum_funds: '20.0',
       maximum_funds: '500000.0' },
     { id: 'btccad',
       name: 'BTC/CAD',
       ask_precision: 8,
       bid_precision: 2,
       minimum_volume: '0.002',
       maximum_volume: '50.0',
       minimum_funds: '20.0',
       maximum_funds: '300000.0' },
     { id: 'ethcad',
       name: 'ETH/CAD',
       ask_precision: 4,
       bid_precision: 2,
       minimum_volume: '0.1',
       maximum_volume: '300.0',
       minimum_funds: '20.0',
       maximum_funds: '300000.0' },
     { id: 'ltccad',
       name: 'LTC/CAD',
       ask_precision: 2,
       bid_precision: 2,
       minimum_volume: '0.15',
       maximum_volume: '1000.0',
       minimum_funds: '20.0',
       maximum_funds: '300000.0' },
     { id: 'btcusd',
       name: 'BTC/USD',
       ask_precision: 8,
       bid_precision: 2,
       minimum_volume: '0.0021',
       maximum_volume: '50.0',
       minimum_funds: '20.0',
       maximum_funds: '300000.0' },
     { id: 'ethusd',
       name: 'ETH/USD',
       ask_precision: 4,
       bid_precision: 2,
       minimum_volume: '0.1',
       maximum_volume: '300.0',
       minimum_funds: '20.0',
       maximum_funds: '300000.0' },
     { id: 'ltcusd',
       name: 'LTC/USD',
       ask_precision: 2,
       bid_precision: 2,
       minimum_volume: '0.2',
       maximum_volume: '1000.0',
       minimum_funds: '20.0',
       maximum_funds: '300000.0' },
     { id: 'xlmcad',
       name: 'XLM/CAD',
       ask_precision: 4,
       bid_precision: 4,
       minimum_volume: '200.0',
       maximum_volume: '200000.0',
       minimum_funds: '20.0',
       maximum_funds: '300000.0' },
     { id: 'bchcad',
       name: 'BCH/CAD',
       ask_precision: 4,
       bid_precision: 2,
       minimum_volume: '0.05',
       maximum_volume: '400.0',
       minimum_funds: '20.0',
       maximum_funds: '500000.0' },
     { id: 'dgbcad',
       name: 'DGB/CAD',
       ask_precision: 2,
       bid_precision: 6,
       minimum_volume: '1000.0',
       maximum_volume: '999999.0',
       minimum_funds: '20.0',
       maximum_funds: '500000.0' },
     { id: 'zeccad',
       name: 'ZEC/CAD',
       ask_precision: 4,
       bid_precision: 2,
       minimum_volume: '0.15',
       maximum_volume: '500.0',
       minimum_funds: '20.0',
       maximum_funds: '500000.0' },
     { id: 'zrxcad',
       name: 'ZRX/CAD',
       ask_precision: 4,
       bid_precision: 4,
       minimum_volume: '40.0',
       maximum_volume: '100000.0',
       minimum_funds: '20.0',
       maximum_funds: '500000.0' },
     { id: 'xlmusd',
       name: 'XLM/USD',
       ask_precision: 4,
       bid_precision: 4,
       minimum_volume: '200.0',
       maximum_volume: '200000.0',
       minimum_funds: '20.0',
       maximum_funds: '300000.0' },
     { id: 'dashusd',
       name: 'DASH/USD',
       ask_precision: 4,
       bid_precision: 2,
       minimum_volume: '0.1',
       maximum_volume: '500.0',
       minimum_funds: '20.0',
       maximum_funds: '500000.0' },
     { id: 'zecusd',
       name: 'ZEC/USD',
       ask_precision: 4,
       bid_precision: 2,
       minimum_volume: '0.2',
       maximum_volume: '500.0',
       minimum_funds: '20.0',
       maximum_funds: '500000.0' },
     { id: 'dgbusd',
       name: 'DGB/USD',
       ask_precision: 2,
       bid_precision: 6,
       minimum_volume: '1000.0',
       maximum_volume: '999999.0',
       minimum_funds: '20.0',
       maximum_funds: '500000.0' },
     { id: 'bchusd',
       name: 'BCH/USD',
       ask_precision: 4,
       bid_precision: 2,
       minimum_volume: '0.05',
       maximum_volume: '200.0',
       minimum_funds: '20.0',
       maximum_funds: '500000.0' },
     { id: 'zrxusd',
       name: 'ZRX/USD',
       ask_precision: 4,
       bid_precision: 4,
       minimum_volume: '50.0',
       maximum_volume: '100000.0',
       minimum_funds: '20.0',
       maximum_funds: '500000.0' },
     { id: 'batusd',
       name: 'BAT/USD',
       ask_precision: 4,
       bid_precision: 4,
       minimum_volume: '50.0',
       maximum_volume: '200000.0',
       minimum_funds: '20.0',
       maximum_funds: '500000.0' },
     { id: 'loomxrp',
       name: 'LOOM/XRP',
       ask_precision: 4,
       bid_precision: 4,
       minimum_volume: '300.0',
       maximum_volume: '999999.0',
       minimum_funds: '20.0',
       maximum_funds: '500000.0' },
     { id: 'dgbxrp',
       name: 'DGB/XRP',
       ask_precision: 4,
       bid_precision: 4,
       minimum_volume: '300.0',
       maximum_volume: '999999.0',
       minimum_funds: '20.0',
       maximum_funds: '500000.0' },
     { id: 'cvcxrp',
       name: 'CVC/XRP',
       ask_precision: 4,
       bid_precision: 4,
       minimum_volume: '300.0',
       maximum_volume: '999999.0',
       minimum_funds: '20.0',
       maximum_funds: '500000.0' },
     { id: 'btcjpy',
       name: 'BTC/JPY',
       ask_precision: 8,
       bid_precision: 2,
       minimum_volume: '0.001',
       maximum_volume: '50.0',
       minimum_funds: '1500.0' } ],
  timestamp: '2019-11-23T02:35:51.296Z',
  took: '0ms' }
```
</details>

### Websocket

#### Subscribe to Tickers
```js
cf.socket.subscribe.tickers();
cf.socket.listener.on('tickers',(tickers)=>{
    //Do whatever you want with the tickers here
})
```

#### Subscribe to specific market Orderbook
```js
cf.socket.subscribe.market('xrpcad')
cf.socket.listener.on('orderbook_updates__xrpcad',(ob)=>{
    //Do whatever you want with the orderbook here
})
```
#### Subscribe to specific market trades
```js
cf.socket.subscribe.market('xrpcad')
cf.socket.listener.on('trades_updates__xrpcad',(trades)=>{
    //Do whatever you want with the trades here
})
```
### Development

At this point in time, implementation of the public and private calls to the REST API is completed as well as the implementation of the Websocket API.
Therefore, at this point, the development will go towards optimization, fixing issues *when they come* and keeping the code up-to-date should Coinfield decide to update their API.

Update 2020/12/17
I've updated the API Wrapper, now compatible with Typescript, code is cleaner nad more documented. Coinfield made several changes to their API you should be aware of if you intend to contribute on this project. You should head to the **Notes about vanilla API** section below for more details.

#### â˜• Keep a fellow Developer hydrated

![XRP](https://github.com/takoyaro/node-coinfield-api/raw/master/icons/xrp.svg?sanitize=true)XRP: `rptgFJ9E1SFMTSGQfrZWVDM6Pf5P5Ui2uk` <br />
![XRP](https://github.com/takoyaro/node-coinfield-api/raw/master/icons/eth.svg?sanitize=true)ETH: `0x821d8D60d43229fBFD6fcD5aD97450D1A164547f`<br />
![BTC](https://github.com/takoyaro/node-coinfield-api/raw/master/icons/btc.svg?sanitize=true)BTC: `17NwZQ86HswwHLEDfBkhu6kZUoUZy4CGSG`

### Notes about vanilla API
Lots of comments, limitations and parameters of this wrapper differs from Coinfield API because their documentation is outdated.
The error field is being deprecated. Must now use `alerts`
Orderbook limits must now be one of these values : `1`,`20`,`50`,`100`,`150` or `200`
Account endpoint now provides very sensitive information. Use carefully.
```ts
  account:{
    uid: string
    email: string,
    level: number,
    role: string,
    tz: string,
    time_zone: string,
    base_cid: string,
    base_currency: string,
    generate_account_statements: boolean,
    account_statements_enabled: boolean,
    trading_discounts_enabled: boolean,
    registration_source: string,
    referrer_uid: string|null,
    mfa_enabled: boolean,
    otp: boolean,
    terms_version: number,
    primary_terms_version: number,
    atp_terms_version: number,
    phones: {number:string}[],
    current_sign_in_ip: string,
    current_sign_in_at: string,
    last_sign_in_ip: string
    last_sign_in_at: string,
    profile: {
      status: string,
      first_name: string,
      middle_name: string,
      last_name: string,
      first_last_name: string,
      second_last_name: string,
      international_full_name: string,
      name_suffix: string,
      birthdate: string,
      gender: string,
      nationality: string,
      country: string,
      uniform_territory: any,
      address: string,
      address_line_1: string,
      address_line_2: string,
      territory: string,
      city: string,
      postcode: string,
      occupation: string,
      job_title: string,
      proof_of_address_type: string,
      proof_of_address_document: string,
      trading_skills_level: string,
      estimated_trading_volume_per_month: string,
      source_of_funds_type_type: string,
      source_of_funds_description: string,
      purpose_of_the_account: any,
      representing_someone_else: any,
      politically_exposed_person: any,
      level_6_application_submitted_at: any,
      level_6_application_method: any
    },
    documents: {type:string,number:string,expiry:string|null,date:string|null, url:string}[]
  },
  timestamp: string,
  took: string
```
Order enpoint actually doesn't return a `trades` array nor a `price` property nor a `market` property.
It is unclear why the changes are not documented and you shouldn't worry about this if you plan to use this API Wrapper but if you plan on contributing or editing the source by yourself, it should be considered.


[![HitCount](http://hits.dwyl.io/takoyaro/node-coinfield-api.svg)](http://hits.dwyl.io/takoyaro/node-coinfield-api)